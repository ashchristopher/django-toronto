{% extends 'pages/base.html' %}

{% load presentations %}
{% load google_calendar %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{{ STATIC_URL }}pages/css/homepage.css" type="text/css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}pages/css/presentation.css" type="text/css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}pages/css/mailchimp-signup.css" type="text/css" />
{% endblock %}

{% block js-libs %}
    {{ block.super }}
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src='{{ STATIC_URL }}js/gmaps.js'></script>
{% endblock %}

{% block javascript %}
    <script type='text/javascript'>
        var map = new GMaps({
            div: '#next-event-map',
            lat: '{{ next_event.location.latitude }}',
            lng: '{{ next_event.location.longitude }}',
            zoom: 15,
            zoomControlOpt: {
                style: 'DEFAULT',
                position: 'TOP_RIGHT'
            }
        });

        map.addMarker({
            lat: '{{ next_event.location.latitude }}',
            lng: '{{ next_event.location.longitude }}',
            title: '{{ next_event.location.name }}',
        });
    </script>

    <script type='text/javascript'>
        $( document ).ready(function() {
            $(window).scroll(function(){
                if ($(this).scrollTop() > 20) {
                    $('#logo').fadeOut('slow');
                } else {
                    $('#logo').fadeIn('slow');
                }
            });
        });
    </script>
{% endblock %}


{% block hero %}
    <div class='container'>
        <div id='hero'>
            <img id='logo' src='{{ STATIC_URL }}images/logos/logo-inverted.png'>
        </div>
    </div>
{% endblock %}


{% block main_content %}
    <div id='newsletter-signup' class='row'>
        <div class='container'>
            <div class='row'>
                <div class='span12'>
                    <span class='section-header'>Sign up for the Django Toronto newsletter.</span>
                </div>
            </div>
            <div class='row'>
                <div class='span8 offset2'>
                    <p class='info'>
                        Receive announcements about meetups and venues as well as a reminder before each event.
                    </p>
                </div>
            </div>
            <div class='row'>
                <form action="http://djangotoronto.us6.list-manage1.com/subscribe/post?u={{ mailchimp_inline_subscribe_token }}" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate form-inline" target="_blank" novalidate>
                    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder='Enter your email...'>
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe">
                </form>
            </div>
        </div>
    </div>

    <div id='upcoming-event' class='row section'>
        <div class='container'>
            <div class='row'>
                <h2 class='section-header span12'>Next Event</h2>
            </div>
            <div class='row'>
                <div class='span11'>
                    <h3>{{ next_event.location.name }} |{{ next_event.date|date:'F j, Y'}}</h3>
                </div>
            </div>
            <div class='row'>
                <div class='span5'>
                    {{ next_event.location.description|linebreaks }}
                </div>
                <div id='venue' class='span2 offset1'>
                    <address>
                        {{ next_event.location.address|linebreaksbr }}
                    </address>
                    <h5>Add to your calendar</h5>
                    <ul class='calendar'>
                        <li>
                            <a href="{% create_google_calendar_url next_event %}" title="Add to Google Calendar">Google</a>
                            <i class="ficon-google"></i>
                        </li>
                        <li class="icalendar">
                            <a href="{% url ics_download next_event.pk %}" title="Download iCalendar">iCalendar</a>
                            <i class="ficon-calendar"></i>
                        </li>
                        {% if next_event.plancast_id %}
                        <li class="plancast">
                            <a href="http://plancast.com/p/{{ next_event.plancast_id }}/" title="View on Plancast">Plancast</a>
                            <i class="ficon-plancast"></i>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                <div class='span4'>
                    <div id='next-event-map'></div>
                </div>
            </div>
        </div>
    </div>

    <div class='row section'>
        <div class='container'>
            <div class='row'>
                <h2 class='section-header span12'>Latest Presentations <small><a href="{% url presentations-list %}">See all...</a></small></h2>
            </div>

            {% for presentation in latest_presentations %}
                <div class='row presentation-row'>
                    {% display_presentation presentation %}
                </div>
            {% endfor %}

        </div>
    </div>

    <div id='hosting-companies' class='row section'>
        <div class='container'>
            <div class='row'>
                <div class='span8 offset2 hosting-header'>
                    <span class='section-header'>Interested in hosting a meetup?</span>
                </div>
            </div>
            <div class='row'>
                <div class='span6 offset3'>
                    <ul class='checklist'>
                        <li>Does your companies technology stack include Django or Python?</li>
                        <li>Are you looking recruit top talent?</li>
                        <li>Do you want to give back to the Toronto development community?</li>
                    </ul>

                    <p>
                        If you answered yes to any of these questions, you might want to host a Django Toronto
                        meetup! <a href='{% url contact_us %}'>Contact</a> us for more information.
                    </p>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
